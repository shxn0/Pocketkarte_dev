<div class="container">
  <%= form_for (@symptom) do |f| %>

    <% if @symptom.errors.any? %>
      <div id= "error_explanation">
      <h2 class= "text-danger"><%= @symptom.errors.count %> errors have been detected</h2>
        <ul>
          <% @symptom.errors.full_messages.each do |msg| %>
            <li class= "text-danger"><%= msg %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="row">
      <div class="patient-background-info col-md-6 col-md-offset-3">
        <span class="badge badge-info">Your background info</span>

        <div class="review_of_system">
          <div class="general">
            <h3>General</h3>
            <table class="table table-striped table-bordered">

            <%# symptomモデルから取得した属性のハッシュ(@symptom_attributes)から %>
            <%# キーのみの配列(@symptom_keys)を利用してハッシュの値を参照する %>
              <% i = 0 %>
              <% n = 0 %>
              <% while n < @symptom_keys.length %> <%# 演算子を <= にすると最後尾の要素が含まれてしまうためにエラーになる %>
                <tr>
                  <td>
                  <div class= "form-group" >
                    <% key_name = @symptom_keys[i] %> <%# キーの配列の要素を取り出してkey_name変数を作成 %>
                    <% symptom = @symptom_attributes[key_name] %> <%# key_name変数をもとにハッシュの値を取得 %>
                    <%= symptom %>
                    <%= f.check_box key_name %>
                    <% i += 1 %>
                    <% n += 1 %>
                  </div>
                  </td>
                </tr>
              <% end %>

            </table >
          </div>
        </div>

        <div class="row pull-right">
          <%= link_to "Back", symptoms_path, class:"btn btn-default" %>
          <%= f.submit 'Register', class: 'btn btn-info' %>
        </div>

      </div>
    </div>

  <% end %>
</div>


<script>

</script>
